<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Muz D√ºnyasƒ± üçå</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
  body {
    margin: 0;
    background: #000;
    font-family: 'Press Start 2P', monospace;
    overflow: hidden;
    touch-action: manipulation;
    user-select: none;
  }
  canvas {
    display: block;
    margin: auto;
    background: #87CEEB; /* g√∂ky√ºz√º */
    image-rendering: pixelated;
  }
  #overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.8);
    color: white;
    font-family: 'Press Start 2P', cursive;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 20px;
    visibility: hidden;
  }
  #overlay.show {
    visibility: visible;
  }
  #replayBtn {
    margin-top: 30px;
    padding: 12px 24px;
    font-size: 14px;
    cursor: pointer;
    background: #fff;
    color: #000;
    border: none;
    font-family: 'Press Start 2P', monospace;
    border-radius: 4px;
  }
</style>
</head>
<body>
<canvas id="game" width="400" height="600"></canvas>

<div id="overlay">
  <div id="endText">ƒ∞Yƒ∞ SON</div>
  <button id="replayBtn">TEKRAR OYNA</button>
</div>

<!-- Sesler -->
<audio id="eatSound1" src="https://minecraft.fandom.com/wiki/Sounds/Entity_Player_Burp?file=entity.player.burp.ogg" preload="auto"></audio>
<audio id="eatSound2" src="https://actions.google.com/sounds/v1/food/chewing.ogg" preload="auto"></audio>
<audio id="fartSound" src="https://www.soundjay.com/human/fart-01.mp3" preload="auto"></audio>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const overlay = document.getElementById('overlay');
const endText = document.getElementById('endText');
const replayBtn = document.getElementById('replayBtn');

const eatSounds = [
  document.getElementById('eatSound1'),
  document.getElementById('eatSound2')
];
const fartSound = document.getElementById('fartSound');

const WIDTH = canvas.width;
const HEIGHT = canvas.height;

// Oyun durumlarƒ±
// "intro": adam muz yiyor ve osuruyor (otomatik)
// "goodEnd": adam tƒ±klandƒ± ‚Üí iyi son ekranƒ±
// "badEnd": yere tƒ±klandƒ± ‚Üí k√∂t√º son ekranƒ±
let state = "intro";

// Zamanlama i√ßin
let eatStarted = false;
let eatEnded = false;
let fartPlayed = false;
let eatSoundTimer = 0;
let fartTimer = 0;

// Muz yaƒümuru
let bananas = [];

// Adamƒ±n basit piksel karakteri (erkek, sarƒ± sa√ß, kahverengi pantolon, siyah √ºst)
const character = {
  x: 170,
  y: 350,
  width: 60,
  height: 80
};

// D√ºnya ve muzdan d√ºnya (iyi son, k√∂t√º son arka planlarƒ±)
const earthImg = new Image();
earthImg.src = "https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/220px-The_Earth_seen_from_Apollo_17.jpg";

const bananaWorldImg = new Image();
bananaWorldImg.src = "https://i.imgur.com/9ytfXTi.png"; // Muzdan d√ºnya benzeri bir g√∂rsel (√∂rnek)

function randomChoice(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

function drawPixelRect(x,y,w,h,color){
  ctx.fillStyle = color;
  ctx.fillRect(x,y,w,h);
}

function drawCharacter(){
  // sa√ß (sarƒ±)
  drawPixelRect(character.x + 20, character.y, 20, 15, "#FFD700");
  // kafa (a√ßƒ±k ten)
  drawPixelRect(character.x + 20, character.y + 15, 20, 20, "#FBE1C4");
  // g√∂vde (siyah √ºst)
  drawPixelRect(character.x + 10, character.y + 35, 40, 40, "#000000");
  // pantolon (kahverengi)
  drawPixelRect(character.x + 10, character.y + 75, 40, 25, "#654321");
  // ayakkabƒ± (siyah)
  drawPixelRect(character.x + 10, character.y + 100, 40, 10, "#000000");
  // muz (kahverengi sap + sarƒ± g√∂vde)
  drawPixelRect(character.x + 40, character.y + 50, 10, 6, "#8B4513");
  drawPixelRect(character.x + 40, character.y + 56, 10, 15, "#FFFF00");
}

function drawFart(x, y, frame) {
  // Basit pƒ±rt g√∂rseli - beyaz k√º√ß√ºk bulut ≈üeklinde
  const alpha = 1 - frame/30;
  ctx.globalAlpha = alpha > 0 ? alpha : 0;
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.ellipse(x + 10 + frame*2, y + 65 - frame*0.5, 10, 6, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.globalAlpha = 1;
}

function drawBananas() {
  for(let i=0; i < bananas.length; i++){
    let b = bananas[i];
    ctx.fillStyle = "#FFFF00";
    ctx.fillRect(b.x, b.y, 15, 30);
    ctx.fillStyle = "#8B4513";
    ctx.fillRect(b.x+4, b.y, 7, 8);
    b.y += b.speed;
    if(b.y > HEIGHT) bananas.splice(i, 1);
  }
}

function spawnBananas(count=50){
  for(let i=0; i < count; i++){
    bananas.push({
      x: Math.random() * WIDTH,
      y: Math.random() * -600,
      speed: 2 + Math.random() * 2
    });
  }
}

function drawIntroScene(){
  // G√∂ky√ºz√º
  ctx.fillStyle = "#87CEEB";
  ctx.fillRect(0, 0, WIDTH, HEIGHT);

  // G√ºne≈ü (piksel karelerden)
  for(let i=0; i < 7; i++){
    for(let j=0; j < 7; j++){
      ctx.fillStyle = "yellow";
      ctx.fillRect(320 + i*6, 30 + j*6, 6, 6);
    }
  }

  // √áimen (piksel ye≈üili bloklar)
  for(let i=0; i < WIDTH; i += 8){
    ctx.fillStyle = "#228B22";
    ctx.fillRect(i, character.y + character.height, 8, HEIGHT - (character.y + character.height));
  }

  drawCharacter();

  if(!eatStarted){
    eatStarted = true;
    eatSoundTimer = 0;
  }

  if(eatSoundTimer < 120){ // 2 saniye boyunca aralƒ±klƒ± yeme sesi
    if(eatSoundTimer % 30 === 0){
      randomChoice(eatSounds).play();
    }
    eatSoundTimer++;
  } else if (!eatEnded) {
    eatEnded = true;
    fartSound.play();
    fartTimer = 0;
  }

  // Fart animasyonu
  if(eatEnded && fartTimer < 30){
    drawFart(character.x, character.y, fartTimer);
    fartTimer++;
  }
}

function drawGoodEnd(){
  // Uzaydan d√ºnya (daha b√ºy√ºk, ortalanmƒ±≈ü)
  ctx.fillStyle = "#000011";
  ctx.fillRect(0, 0, WIDTH, HEIGHT);

  if(earthImg.complete){
    ctx.drawImage(earthImg, WIDTH/2 - 110, HEIGHT/2 - 110, 220, 220);
  } else {
    ctx.fillStyle = "white";
    ctx.fillText("D√ºnya Y√ºkleniyor...", WIDTH/2 - 70, HEIGHT/2);
  }

  ctx.fillStyle = "white";
  ctx.font = "24px 'Press Start 2P'";
  ctx.textAlign = "center";
  ctx.fillText("ƒ∞Yƒ∞ SON", WIDTH/2, HEIGHT/2 + 140);
}

function drawBadEnd(){
  // Muzdan d√ºnya arka planƒ± (koyu gece)
  ctx.fillStyle = "#220000";
  ctx.fillRect(0, 0, WIDTH, HEIGHT);

  if(bananaWorldImg.complete){
    ctx.drawImage(bananaWorldImg, WIDTH/2 - 110, HEIGHT/2 - 110, 220, 220);
  } else {
    ctx.fillStyle = "white";
    ctx.fillText("Y√ºkleniyor...", WIDTH/2 - 70, HEIGHT/2);
  }

  // Muz yaƒümuru
  drawBananas();

  ctx.fillStyle = "white";
  ctx.font = "24px 'Press Start 2P'";
  ctx.textAlign = "center";
  ctx.fillText("K√ñT√ú SON", WIDTH/2, HEIGHT/2 + 140);
}

// Oyun d√∂ng√ºs√º
function gameLoop(){
  if(state === "intro"){
    drawIntroScene();
  } else if(state === "goodEnd"){
    drawGoodEnd();
  } else if(state === "badEnd"){
    drawBadEnd();
  }
  requestAnimationFrame(gameLoop);
}

canvas.addEventListener("click", (e) => {
  if(state !== "intro") return;

  const rect = canvas.getBoundingClientRect();
  const cx = e.clientX - rect.left;
  const cy = e.clientY - rect.top;

  if(cx >= character.x && cx <= character.x + character.width &&
     cy >= character.y && cy <= character.y + character.height){
    // Adam tƒ±klandƒ± ‚Üí ƒ∞yi son
    state = "goodEnd";
    overlay.classList.add("show");
    endText.textContent = "ƒ∞Yƒ∞ SON";
  } else {
    // Yere tƒ±klandƒ± ‚Üí K√∂t√º son
    state = "badEnd";
    spawnBananas(80);
    overlay.classList.add("show");
    endText.textContent = "K√ñT√ú SON";
  }
});

replayBtn.addEventListener("click", () => {
  // Oyunu sƒ±fƒ±rla
  bananas = [];
  eatStarted = false;
  eatEnded = false;
  fartPlayed = false;
  eatSoundTimer = 0;
  fartTimer = 0;
  state = "intro";
  overlay.classList.remove("show");
});

gameLoop();
</script>
</body>
</html>
