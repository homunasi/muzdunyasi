<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Muz D√ºnyasƒ± üçå</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
  body {
    margin: 0; background: #000; overflow: hidden;
    font-family: 'Press Start 2P', monospace;
    user-select: none;
    -webkit-user-select:none;
    -webkit-tap-highlight-color: transparent;
  }
  canvas {
    display: block; margin: auto;
    background: #1a1a1a;
    image-rendering: pixelated;
    touch-action: manipulation;
  }
  #overlay {
    position: fixed; top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    color: white;
    font-family: 'Press Start 2P', cursive;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    text-align: center;
    pointer-events: none;
  }
  #overlay.show {
    pointer-events: all;
  }
  #endingText {
    font-size: 18px;
    margin-bottom: 20px;
  }
  #replayBtn {
    font-size: 14px;
    padding: 10px 20px;
    cursor: pointer;
    border: none;
    background: #fff;
    color: #000;
    font-family: 'Press Start 2P', monospace;
    user-select: none;
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>

<div id="overlay">
  <div id="endingText"></div>
  <button id="replayBtn">TEKRAR OYNA</button>
</div>

<!-- Sesler -->
<audio id="eatSound" src="https://minecraftsound.net/wp-content/uploads/2018/06/minecraft-eat-1.mp3" preload="auto"></audio>
<audio id="fartSound" src="https://www.soundjay.com/human/fart-01.mp3" preload="auto"></audio>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');
  const overlay = document.getElementById('overlay');
  const endingText = document.getElementById('endingText');
  const replayBtn = document.getElementById('replayBtn');
  const eatSound = document.getElementById('eatSound');
  const fartSound = document.getElementById('fartSound');

  // Piksel adam i√ßin basit renk bloklarƒ± (az pikselli, net)
  const player = {
    x: 170,
    y: 300,
    width: 60,
    height: 90,
    frame: 0,
    farting: false,
    fartX: 0,
    fartY: 0,
    fartAlpha: 0
  };

  let gameState = 'intro'; // intro, goodEnd, badEnd
  let bananas = [];
  let bananaFallSpeed = 3;

  // Muz √ßizimi i√ßin
  function drawBanana(x, y) {
    ctx.fillStyle = '#FFEB3B';
    ctx.beginPath();
    ctx.moveTo(x + 5, y);
    ctx.bezierCurveTo(x + 20, y - 10, x + 25, y + 15, x + 5, y + 20);
    ctx.closePath();
    ctx.fill();
    ctx.strokeStyle = '#E6C200';
    ctx.lineWidth = 1;
    ctx.stroke();
  }

  // Adamƒ± √ßiz (basit piksel bloklar, sa√ß sarƒ±, √ºst siyah, pantolon kahverengi)
  function drawPlayer() {
    // V√ºcut
    ctx.fillStyle = '#000000'; // siyah ti≈ü√∂rt
    ctx.fillRect(player.x + 15, player.y + 30, 30, 40);

    // Pantolon kahverengi
    ctx.fillStyle = '#6B3E1B';
    ctx.fillRect(player.x + 15, player.y + 70, 30, 20);

    // Kafa (sarƒ± sa√ß)
    ctx.fillStyle = '#FFD700';
    ctx.fillRect(player.x + 15, player.y, 30, 30);

    // Y√ºz (g√∂zler)
    ctx.fillStyle = '#000';
    ctx.fillRect(player.x + 20, player.y + 10, 5, 5);
    ctx.fillRect(player.x + 35, player.y + 10, 5, 5);

    // Muz (yerken g√∂stermek i√ßin animasyon)
    if(gameState === 'intro' && player.frame % 60 < 30){
      drawBanana(player.x + 40, player.y + 55);
    }
  }

  // Muz yaƒümasƒ± i√ßin
  function spawnBananas() {
    for(let i=0; i<50; i++){
      bananas.push({
        x: Math.random() * (canvas.width - 20),
        y: Math.random() * -600
      });
    }
  }

  function drawBananas() {
    bananas.forEach((b) => {
      drawBanana(b.x, b.y);
      b.y += bananaFallSpeed;
      if(b.y > canvas.height) b.y = Math.random() * -600;
    });
  }

  // Pƒ±rt efekti √ßizimi
  function drawFart() {
    if(player.fartAlpha <= 0) return;
    ctx.save();
    ctx.globalAlpha = player.fartAlpha;
    ctx.fillStyle = '#CCC';
    ctx.beginPath();
    ctx.ellipse(player.fartX, player.fartY, 20, 10, 0, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();

    // Yava≈ü√ßa kaybolur
    player.fartY -= 0.5;
    player.fartAlpha -= 0.02;
  }

  // Arka planlar √ßizimi

  // Normal d√ºnya (iyi son)
  function drawNormalWorld() {
    // Gece g√∂ky√ºz√º
    ctx.fillStyle = '#001022';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Piksel yƒ±ldƒ±zlar
    for(let i=0; i<100; i++){
      ctx.fillStyle = `rgba(255,255,255,${Math.random()})`;
      ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, 2, 2);
    }

    // Basit d√ºnya silueti
    ctx.fillStyle = '#084C10';
    ctx.beginPath();
    ctx.moveTo(50, canvas.height);
    ctx.lineTo(100, 400);
    ctx.lineTo(150, 420);
    ctx.lineTo(200, 390);
    ctx.lineTo(250, 410);
    ctx.lineTo(300, 380);
    ctx.lineTo(350, 400);
    ctx.lineTo(canvas.width, canvas.height);
    ctx.closePath();
    ctx.fill();
  }

  // Muzdan d√ºnya (k√∂t√º son)
  function drawBananaWorld() {
    // Gece tonu
    ctx.fillStyle = '#220011';
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Muz ≈üekilleri ile d√ºnya
    for(let i=0; i<50; i++){
      ctx.fillStyle = `rgba(255,235,59,${0.3 + Math.random()*0.7})`;
      let x = (i*30) % canvas.width;
      let y = 500 + Math.sin(i) * 10;
      ctx.beginPath();
      ctx.moveTo(x + 5, y);
      ctx.bezierCurveTo(x + 20, y - 10, x + 25, y + 15, x + 5, y + 20);
      ctx.closePath();
      ctx.fill();
    }
  }

  // Oyun d√∂ng√ºs√º ve √ßizimleri
  function gameLoop(){
    if(gameState === 'intro'){
      // G√∂ky√ºz√º + √ßimenli arka plan
      ctx.fillStyle = '#87CEEB';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#228B22';
      ctx.fillRect(0, player.y + player.height, canvas.width, canvas.height - (player.y + player.height));

      // G√ºne≈ü
      ctx.fillStyle = '#FFD700';
      ctx.beginPath();
      ctx.ellipse(350, 50, 40, 40, 0, 0, Math.PI*2);
      ctx.fill();

      drawPlayer();

      // Muz yeme animasyonu √ßer√ßeve sayacƒ±
      player.frame++;

      // Pƒ±rt yok introda
      player.fartAlpha = 0;

    } else if(gameState === 'goodEnd'){
      drawNormalWorld();
      drawPlayer();
      drawTextOverlay("ƒ∞Yƒ∞ SON");

    } else if(gameState === 'badEnd'){
      drawBananaWorld();
      drawBananas();
      drawFart();
      drawTextOverlay("K√ñT√ú SON");
    }
    requestAnimationFrame(gameLoop);
  }

  // Metin overlay
  function drawTextOverlay(text){
    endingText.innerText = text;
    overlay.classList.add('show');
  }

  // Tƒ±klama kontrol√º
  canvas.addEventListener('click', (e) => {
    if(gameState === 'intro'){
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      if(x >= player.x && x <= player.x + player.width && y >= player.y && y <= player.y + player.height){
        // Adam tƒ±klandƒ±: iyi son
        gameState = 'goodEnd';
        eatSound.play();
        overlay.classList.add('show');
      } else {
        // Yere tƒ±klandƒ±: k√∂t√º son
        gameState = 'badEnd';
        spawnBananas();
        overlay.classList.add('show');
        fartSound.play();
        player.fartAlpha = 1;
        player.fartX = player.x + 30;
        player.fartY = player.y + player.height - 10;
      }
    } else {
      // ƒ∞yi ya da k√∂t√º sondaysak ekrana tƒ±klayƒ±nca ba≈ütan ba≈üla
      resetGame();
    }
  });

  // Replay buton tƒ±klamasƒ±
  replayBtn.addEventListener('click', () => {
    resetGame();
  });

  // Oyunu sƒ±fƒ±rla
  function resetGame(){
    gameState = 'intro';
    bananas = [];
    player.frame = 0;
    player.fartAlpha = 0;
    overlay.classList.remove('show');
  }

  gameLoop();
</script>
</body>
</html>
